generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  email     String   @unique
  password  String
  firstName String?
  lastName  String?
  company   String?
  vendor    String?
  phone     String?
  initials  String?
  role      Role     @default(USER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  documents Document[]
}

enum Role {
  ADMIN
  USER
}

model LibrarySES {
  id          Int      @id @default(autoincrement())
  category    String? // ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà ‡πÄ‡∏ä‡πà‡∏ô Wall Module
  imageUrl    String? // URL ‡∏£‡∏π‡∏õ ‡πÄ‡∏ä‡πà‡∏ô https://cdn.domain.com/images/a.jpg
  assetName   String // ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
  code        String?
  barcode     String?
  dimensionMm String? // ‡∏Ç‡∏ô‡∏≤‡∏î
  status      String?
  remark      String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model LibrarySIS {
  id         Int      @id @default(autoincrement())
  barcode    String?
  assetName  String?
  assetType  String?
  dimension  String?
  warehouse  String?
  pictureUrl String? // ‚úÖ ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ
  status     String?
  remark     String?
  digit      String? // ‚úÖ ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö column ‡∏ô‡∏µ‡πâ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model Shop {
  id        Int      @id @default(autoincrement())
  mcsCode   String   @unique
  shopName  String?
  region    String?
  state     String?
  shopType  String? // SHOP TYPE - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
  status    String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Asset {
  id            Int      @id @default(autoincrement())
  barcode       String   @unique
  assetName     String?
  size          String?
  warehouse     String? // üëà ‡πÇ‡∏Å‡∏î‡∏±‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö User.vendor)
  startWarranty String? // üëà ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å DateTime ‚Üí String
  endWarranty   String? // üëà ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å DateTime ‚Üí String
  cheilPO       String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([barcode])
  @@index([warehouse])
}

model Document {
  id           Int      @id @default(autoincrement())
  docCode      String   @unique // ‡πÄ‡∏ä‡πà‡∏ô DP25011701
  documentType String // withdraw, routing2shops, routing3shops ...
  createdAt    DateTime @default(now())
  createdById  Int
  createdBy    User     @relation(fields: [createdById], references: [id])

  // üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏ö‡∏¥‡∏Å
  fullName String?
  company  String?
  phone    String?

  // üîπ ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ + ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
  note   String?
  status String? // draft | submitted | approved | rejected

  // üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á (transfer)
  operation   String? // Event, ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï, ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡πÇ‡∏Å‡∏î‡∏±‡∏á‡πÄ‡∏ä‡πà‡∏≤, ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
  otherDetail String? // ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡∏≠‡∏∑‡πà‡∏ô‡πÜ"

  // üîπ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏° (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏¢‡∏∑‡∏° borrow, borrowsecurity)
  borrowType String? // "EVENT" | "TEMP SHOP"

  // üîπ ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡∏±‡∏ö (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡πÄ‡∏Å‡πá‡∏ö Asset ‡∏Å‡∏•‡∏±‡∏ö)
  returnCondition String? // "normal" = ‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥, "from_borrow" = ‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°

  // üîπ Other Activities (Admin ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≠‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥)
  otherActivity String? // "outToRentalWarehouse" | "inToRentalWarehouse" | "discarded" | "adjustError"

  // üîπ Transaction Status (Admin ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≠‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Transaction History)
  transactionStatus String? // "Shop", "Discarded", "Repairing", "Send to Rental warehouse", etc.

  // üîπ ‡∏£‡∏π‡∏õ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ö‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Receive Transfer)
  transferDocImageUrl String? // ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ö‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á

  // ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
  shops DocumentShop[] // 1 Document ‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡πâ‡∏≤‡∏ô

  // ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö Transaction History
  transactions AssetTransactionHistory[]

  // ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö Pick Asset Tasks
  pickTasks PickAssetTask[]

  // ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö Repair Tasks
  repairTasks RepairTask[]

  // ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö Security Set Transactions
  securitySetTransactions SecuritySetTransaction[]

  // ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö Transfer Receive Tasks
  transferReceiveTasks TransferReceiveTask[]
}

model DocumentShop {
  id         Int      @id @default(autoincrement())
  documentId Int
  document   Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  // üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
  shopCode         String?
  shopName         String?
  startInstallDate DateTime?
  endInstallDate   DateTime?
  q7b7             String?
  shopFocus        String?

  // ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô (Asset + Security)
  assets       DocumentAsset[]
  securitySets DocumentSecuritySet[]
}

model DocumentAsset {
  id     Int          @id @default(autoincrement())
  shopId Int
  shop   DocumentShop @relation(fields: [shopId], references: [id], onDelete: Cascade)

  name        String
  size        String?
  kv          String?
  qty         Int
  withdrawFor String?
  barcode     String? // Barcode ‡∏ó‡∏µ‡πà User ‡∏Å‡∏£‡∏≠‡∏Å (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö returnasset, shoptoshop)
  grade       String? // ‡πÄ‡∏Å‡∏£‡∏î Asset
}

model DocumentSecuritySet {
  id     Int          @id @default(autoincrement())
  shopId Int
  shop   DocumentShop @relation(fields: [shopId], references: [id], onDelete: Cascade)

  name        String
  qty         Int
  withdrawFor String?
  barcode     String? // Barcode ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö CONTROLBOX (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ returnasset)
}

// ‚úÖ ========== AssetTransactionHistory Model (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏Ç‡∏≠‡∏á Asset) ==========
model AssetTransactionHistory {
  id Int @id @default(autoincrement())

  // üîó ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á
  documentId Int
  document   Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  // üü® ========== 1. ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Asset (7 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå) ==========
  barcode       String  @db.VarChar(50)
  assetName     String
  startWarranty String? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô String ‡∏ï‡∏≤‡∏° schema ‡πÄ‡∏î‡∏¥‡∏°)
  endWarranty   String? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô
  cheilPO       String? // ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà PO
  size          String? // ‡∏Ç‡∏ô‡∏≤‡∏î
  grade         String? // ‡πÄ‡∏Å‡∏£‡∏î (A, AB, B, BC, C, CD, D)

  // üü¶ ========== 2. ‡∏Ç‡∏≤ IN (7 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå) ==========
  warehouseIn String? // ‡πÇ‡∏Å‡∏î‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤
  inStockDate DateTime? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤
  unitIn      Int? // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤
  fromVendor  String? // ‡∏à‡∏≤‡∏Å Vendor ‡πÑ‡∏´‡∏ô
  mcsCodeIn   String? // MCS Code ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á
  fromShop    String? // ‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡πÑ‡∏´‡∏ô
  remarkIn    String?   @db.Text // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Ç‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤

  // üü• ========== 3. ‡∏Ç‡∏≤ OUT (7 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå) ==========
  outDate    DateTime? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å‡∏≠‡∏≠‡∏Å
  unitOut    Int? // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å‡∏≠‡∏≠‡∏Å
  toVendor   String? // ‡πÑ‡∏õ Vendor ‡πÑ‡∏´‡∏ô
  status     String? // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (ACTIVE, INACTIVE, etc.)
  shopType   String? // Shop Type ‡∏à‡∏≤‡∏Å Shop table (SES, QSS, NO MCS, etc.)
  mcsCodeOut String? // MCS Code ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á
  toShop     String? // ‡πÑ‡∏õ‡∏£‡πâ‡∏≤‡∏ô‡πÑ‡∏´‡∏ô
  remarkOut  String?   @db.Text // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Ç‡∏≤‡∏≠‡∏≠‡∏Å

  // üü© ========== 4. Auto by Logic (14 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå) ==========

  // 4.1 Asset Status (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
  assetStatus String? // NEW, USED, REFURBISHED

  // 4.2 Balance (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
  balance Int @default(1) // 1 = ‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà, 0 = ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß

  // 4.3 Transaction Category (Admin ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)
  transactionCategory String? // "WK OUT-IN", "Borrow-Return", "Discarded", etc.

  // 4.4 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å In/Out Date) - Format: "2025 WK 23"
  wkOut                String? @db.VarChar(20) // WK OUT
  wkIn                 String? @db.VarChar(20) // WK IN
  wkOutForRepair       String? @db.VarChar(20) // WK OUT for Repair
  wkInForRepair        String? @db.VarChar(20) // WK IN for Repair
  newInStock           String? @db.VarChar(20) // New In Stock
  refurbishedInStock   String? @db.VarChar(20) // Refurbished Instock
  borrow               String? @db.VarChar(20) // Borrow
  return               String? @db.VarChar(20) // Return
  repair               String? @db.VarChar(20) // Repair (‡∏™‡πà‡∏á‡∏ã‡πà‡∏≠‡∏°)
  outToRentalWarehouse String? @db.VarChar(20) // Out to Rental Warehouse
  inToRentalWarehouse  String? @db.VarChar(20) // In to Rental Warehouse
  discarded            String? @db.VarChar(20) // Discarded
  adjustError          String? @db.VarChar(20) // Adjust Error (‡πÑ‡∏ß‡πâ‡∏ß‡πà‡∏≤‡∏á)

  // üìÖ Metadata
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  approvedAt DateTime? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
  approvedBy Int? // User ID ‡∏Ç‡∏≠‡∏á Admin ‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥

  // üîç Indexes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
  @@index([documentId])
  @@index([barcode])
  @@index([inStockDate])
  @@index([outDate])
  @@index([assetStatus])
  @@index([balance])
}

// ‚úÖ ========== PickAssetTask Model (‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠ Picker ‡∏Å‡∏£‡∏≠‡∏Å Barcode) ==========
model PickAssetTask {
  id         Int      @id @default(autoincrement())
  documentId Int
  document   Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  // üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Asset/Security ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á Pick
  assetName     String
  size          String?
  grade         String?
  qty           Int     @default(1) // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡∏°‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô 1)
  isSecuritySet Boolean @default(false) // true = Security Set, false = Asset

  // üîπ ‡πÇ‡∏Å‡∏î‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á Pick (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç! ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏á Picker)
  warehouse String

  // üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô UI)
  shopCode         String?
  shopName         String?
  startInstallDate DateTime?
  endInstallDate   DateTime?
  q7b7             String?
  shopFocus        String?

  // üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏ö‡∏¥‡∏Å (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô UI)
  requesterName    String?
  requesterCompany String?
  requesterPhone   String?

  // üîπ Transaction Status (‡∏à‡∏≤‡∏Å Document - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Transaction History)
  transactionStatus String? // "Shop", "Discarded", "Repairing", etc.

  // üîπ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
  status String @default("pending") // pending, picking, completed

  // üîπ Barcode ‡∏ó‡∏µ‡πà Pick ‡πÅ‡∏•‡πâ‡∏ß
  barcode         String? // Barcode ‡∏ó‡∏µ‡πà Picker ‡∏Å‡∏£‡∏≠‡∏Å
  barcodeImageUrl String? // ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢ Barcode
  assetImageUrl   String? // ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢ Asset

  // üìÖ Metadata
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  completedAt DateTime?
  completedBy Int? // User ID ‡∏Ç‡∏≠‡∏á Picker ‡∏ó‡∏µ‡πà Complete

  // üîç Indexes
  @@index([documentId])
  @@index([warehouse])
  @@index([status])
}

// ‚úÖ ========== RepairTask Model (‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£) ==========
model RepairTask {
  id         Int      @id @default(autoincrement())
  documentId Int
  document   Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  // üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Asset ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡πà‡∏≠‡∏°
  barcode   String
  assetName String
  size      String?
  grade     String?

  // üîπ ‡πÇ‡∏Å‡∏î‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏° (‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å‡∏ü‡∏¥‡∏•‡∏î‡πå "‡∏ã‡πà‡∏≠‡∏°‡∏ó‡∏µ‡πà‡πÇ‡∏Å‡∏î‡∏±‡∏á")
  repairWarehouse String

  // üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°
  reporterName    String?
  reporterCompany String?
  reporterPhone   String?
  reporterVendor  String? // Vendor ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° (‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á Transaction)

  // üîπ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
  status String @default("pending") // pending = ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£, repairing = ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡πà‡∏≠‡∏°, completed = ‡∏ã‡πà‡∏≠‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à

  // üîπ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏°
  repairStartDate DateTime? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ã‡πà‡∏≠‡∏°
  repairEndDate   DateTime? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à

  // üîπ Transaction ID ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡∏≤ OUT)
  transactionId Int? // ID ‡∏Ç‡∏≠‡∏á AssetTransactionHistory ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≠‡∏ô Admin ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥

  // üìÖ Metadata
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  completedAt DateTime?
  completedBy Int? // User ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°

  // üîç Indexes
  @@index([documentId])
  @@index([repairWarehouse])
  @@index([status])
  @@index([barcode])
}

// ‚úÖ ========== SecuritySetTransaction Model (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏Ç‡∏≠‡∏á Security Set) ==========
model SecuritySetTransaction {
  id Int @id @default(autoincrement())

  // üîó ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÅ‡∏£‡∏Å)
  docCode String @db.VarChar(50)

  // üîó ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á
  documentId Int
  document   Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  // üü® ========== 1. ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Security Set (7 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå) ==========
  // ‚ö†Ô∏è ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ 3 Asset Names:
  // 1. CONTROLBOX 6 PORT (M-60000R) with power cable (‡∏°‡∏µ Barcode)
  // 2. Security Type C Ver.7.1 (‡πÑ‡∏°‡πà‡∏°‡∏µ Barcode)
  // 3. Security Type C Ver.7.0 (‡πÑ‡∏°‡πà‡∏°‡∏µ Barcode)
  barcode       String? @db.VarChar(50) // ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ CONTROLBOX ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ Barcode
  assetName     String
  startWarranty String? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô
  endWarranty   String? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô
  cheilPO       String? // ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà PO
  size          String? // ‡∏Ç‡∏ô‡∏≤‡∏î
  grade         String? // ‡πÄ‡∏Å‡∏£‡∏î (A, AB, B, BC, C, CD, D)

  // üü¶ ========== 2. ‡∏Ç‡∏≤ IN (7 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå) ==========
  warehouseIn String? // ‡πÇ‡∏Å‡∏î‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤
  inStockDate DateTime? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤
  unitIn      Int? // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤
  fromVendor  String? // ‡∏à‡∏≤‡∏Å Vendor ‡πÑ‡∏´‡∏ô
  mcsCodeIn   String? // MCS Code ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á
  fromShop    String? // ‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡πÑ‡∏´‡∏ô
  remarkIn    String?   @db.Text // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Ç‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤

  // üü• ========== 3. ‡∏Ç‡∏≤ OUT (7 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå) ==========
  outDate    DateTime? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å‡∏≠‡∏≠‡∏Å
  unitOut    Int? // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å‡∏≠‡∏≠‡∏Å
  toVendor   String? // ‡πÑ‡∏õ Vendor ‡πÑ‡∏´‡∏ô
  status     String? // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (ACTIVE, INACTIVE, etc.)
  mcsCodeOut String? // MCS Code ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á
  toShop     String? // ‡πÑ‡∏õ‡∏£‡πâ‡∏≤‡∏ô‡πÑ‡∏´‡∏ô
  remarkOut  String?   @db.Text // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Ç‡∏≤‡∏≠‡∏≠‡∏Å

  // üü© ========== 4. Auto by Logic (14 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå) ==========

  // 4.1 Asset Status (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
  assetStatus String? // NEW, USED, REFURBISHED

  // 4.2 Balance (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
  balance Int @default(1) // 1 = ‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà, 0 = ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß

  // 4.3 Transaction Category (Admin ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)
  transactionCategory String? // "WK OUT-IN", "Borrow-Return", "Discarded", etc.

  // 4.4 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å In/Out Date) - Format: "2025 WK 23"
  wkOut                String? @db.VarChar(20) // WK OUT
  wkIn                 String? @db.VarChar(20) // WK IN
  wkOutForRepair       String? @db.VarChar(20) // WK OUT for Repair
  wkInForRepair        String? @db.VarChar(20) // WK IN for Repair
  newInStock           String? @db.VarChar(20) // New In Stock
  refurbishedInStock   String? @db.VarChar(20) // Refurbished Instock
  borrow               String? @db.VarChar(20) // Borrow
  return               String? @db.VarChar(20) // Return
  outToRentalWarehouse String? @db.VarChar(20) // Out to Rental Warehouse
  repair               String? @db.VarChar(20) // Repair (‡∏™‡πà‡∏á‡∏ã‡πà‡∏≠‡∏°)
  inToRentalWarehouse  String? @db.VarChar(20) // In to Rental Warehouse
  discarded            String? @db.VarChar(20) // Discarded
  adjustError          String? @db.VarChar(20) // Adjust Error (‡πÑ‡∏ß‡πâ‡∏ß‡πà‡∏≤‡∏á)

  // üìÖ Metadata
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  approvedAt DateTime? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
  approvedBy Int? // User ID ‡∏Ç‡∏≠‡∏á Admin ‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥

  // üîç Indexes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
  @@index([documentId])
  @@index([docCode])
  @@index([barcode])
  @@index([assetName])
  @@index([inStockDate])
  @@index([outDate])
  @@index([balance])
}

// ‚úÖ ========== TransferReceiveTask Model (‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÇ‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢) ==========
model TransferReceiveTask {
  id         Int      @id @default(autoincrement())
  documentId Int
  document   Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  // üîó ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á PickAssetTask ‡∏ó‡∏µ‡πà Picker ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏≥
  pickAssetTaskId Int

  // üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Asset
  barcode   String
  assetName String
  size      String?
  grade     String?

  // üîπ ‡πÇ‡∏Å‡∏î‡∏±‡∏á‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á - ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á
  fromWarehouse String  // ‡πÇ‡∏Å‡∏î‡∏±‡∏á‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏°‡∏≤)
  toWarehouse   String  // ‡πÇ‡∏Å‡∏î‡∏±‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á)

  // üîπ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
  status       String  @default("pending") // pending = ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö, received = ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß, rejected = ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
  rejectReason String? // ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò

  // üîπ ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢
  assetImageUrl String? // ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢ Asset (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)

  // üìÖ Metadata
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  receivedAt DateTime? // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á
  receivedBy Int?      // User ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á

  // üîç Indexes
  @@index([documentId])
  @@index([toWarehouse])
  @@index([status])
  @@index([pickAssetTaskId])
}
